#include <msp430.h> 
#include "Serial_JMP.h"
#include <stdlib.h>
/*
 * main.c
 */

//UART Interrupt Vector

void main(void) {
    WDTCTL = WDTPW | WDTHOLD;	// Stop watchdog timer

    UART_setup(57600);
    USB_setup(9600);
	_BIS_SR(GIE);

	char *buffer;
	buffer = (char *) malloc(50);

	UART_print("ot#o0");
	while(1){
		UART_print("#f");
		UART_receive_line(buffer);
		//UART_print(buffer);
		//UART_transmit_byte('\0');
		//UART_transmit_byte('\n');
		//UART_transmit_byte('\r');
		USB_print(buffer);
		__delay_cycles(500000);
	}


	UART_print("#o0");


	//while (1);

	UART_print("#ob#o1#s");

	while(1);
}
