#include <msp430.h> 
#include "Serial_JMP.h"
#include <stdlib.h>
/*
 * main.c
 */

//UART Interrupt Vector

void main(void) {
    WDTCTL = WDTPW | WDTHOLD;	// Stop watchdog timer

    UART_setup(9600);
    USB_setup(9600);
	_BIS_SR(GIE);

	char *buffer;
	buffer = (char *) malloc(50);
	while(1){
		UART_receive_line(buffer);
		UART_print(buffer);
		//UART_transmit_byte('\0');
		//UART_transmit_byte('\n');
		//UART_transmit_byte('\r');
		USB_print(buffer);

	}
	while(!(UCA1IFG & UCTXIFG));
	UCA1TXBUF = 'T';				// Export to global variable

	while(!(UCA1IFG & UCTXIFG));
	UCA1TXBUF = 'E';				// Export to global variable

	UART_print("#o0");

	UART_print("#o1");
	UART_print("#ot");
	//while (1);

	UART_print("#ob#o1#s");

	while(1);
}
